# Management

## Creating and Updating

The recommended setup is to store goals/rules/conditions/constraints (hereafter called "peripheral code")
in one or more repositories outside Aerie, and uploading
them either through the UI or the unofficial [Aerie CLI](https://github.com/NASA-AMMOS/aerie-cli).

For example, after creating a new goal as described in the following pages, you can upload it with the CLI using
`aerie-cli goals new <path/to/MyGoal.jar>`. A new goal will be created in Aerie with a default name of `MyGoal`.
See `aerie-cli goals new --help` for more details, such as automatically
associating it with a model or plan. To update a goal afterward, you can run `aerie-cli goals update <path/to/MyGoal.jar>`,
assuming that the default name was not changed. The same works for Typescript eDSL declarations, and similar workflows
will be implemented for constraints and conditions soon.

## Model and Plan Association

In Aerie, peripherals live independently of plans and models, and can be associated with
any number of plans and models, or none at all. Each model and plan has a scheduling specification and a constraints
specification, which is simply a list of peripherals to run during the scheduling or constraints actions, respectively.

Model specifications are never run directly, and instead populate the default spec for any plans created from that model.
So if a particular constraint is widely applicable to all plans made from a particular model, you can associate it with
the model by navigating to `Models -> <select your model> -> Edit details ... -> Constraints -> Library`. Click the checkbox
on your constraint and select `Save`. Now any new plans made with this model will include your constraint in its specification.

Peripherals that don't apply to all plans for a model can be associated with individual plans too. In the main plan view,
navigate to the `Scheduling Goals` or `Constraints` pane, then click `Manage`. Click the checkbox for your peripheral and
select `Save`.

Additionally, the Aerie CLI provides options when creating a new goal to associate it with a given model ID or plan ID.

## Version Locking

Peripheral associations can be locked to a specific revision, on either the model or plan specification. In the specification,
you can change `Always use latest` to a revision number of your choice.

## Deleting

Peripherals can be deleted in the UI by navigating to the `Scheduling` or `Constraints` view in the top left, and deleting
them there. This action can't be done if the peripheral is being used by a plan or model.
